<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Love Wall üíå</title>

<style>
body{
margin:0;
font-family:Segoe UI;
background:linear-gradient(135deg,#ff4f8b,#3b0030);
min-height:100vh;
color:white;
display:flex;
justify-content:center;
align-items:center;
padding:10px;
}

.box{
background:rgba(255,255,255,.2);
padding:15px;
border-radius:20px;
width:100%;
max-width:380px;
}

input,textarea{
width:100%;
padding:10px;
border-radius:10px;
border:none;
margin-top:8px;
}

button{
width:100%;
padding:10px;
border-radius:15px;
border:none;
background:#ffd1dc;
margin-top:10px;
}

.msg{
background:white;
color:black;
padding:8px;
border-radius:10px;
margin:6px 0;
font-size:13px;
}

#thanks{
position:fixed;
inset:0;
background:rgba(0,0,0,.6);
display:none;
justify-content:center;
align-items:center;
}

#thanks div{
background:white;
color:black;
padding:20px;
border-radius:20px;
text-align:center;
}

.del{
color:red;
font-size:11px;
cursor:pointer;
float:right;
}
</style>
</head>

<body>

<div class="box">

<h3 align=center>üíå Love Wall</h3>

<input id="name" placeholder="Your name">

<textarea id="msg" placeholder="Your message"></textarea>

<button onclick="send()">Send ‚ù§Ô∏è</button>

<input id="pin" placeholder="Admin PIN (1234)">

<div id="list"></div>

</div>

<div id="thanks">
<div>
<h3>Thank you for your message üíñ</h3>
<button onclick="thanks.style.display='none'">Close</button>
</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getDatabase, ref, push, onChildAdded, remove } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

const firebaseConfig={
apiKey:"AIzaSyAetysNyLP1kFZIWM-IhDtHH_Kq7HoSGxg",
databaseURL:"https://vmlove-a2df1-default-rtdb.asia-southeast1.firebasedatabase.app"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);
const wall=ref(db,"wall");

window.send=function(){

let n=name.value.trim();
let m=msg.value.trim();

if(!n||!m){alert("Fill both");return;}

push(wall,{
name:n,
msg:m,
time:new Date().toLocaleString()
});

msg.value="";
thanks.style.display="flex";
burst();
};

onChildAdded(wall,snap=>{
let d=snap.val();
let id=snap.key;

let div=document.createElement("div");
div.className="msg";

let del="";

if(pin.value=="1234"){
del=`<span class='del' onclick="delMsg('${id}')">Delete</span>`;
}

div.innerHTML=`${del}<b>${d.name}</b><br>${d.msg}<br><small>${d.time}</small>`;
list.prepend(div);
});

window.delMsg=function(id){
remove(ref(db,"wall/"+id));
location.reload();
}

/* heart burst */
function burst(){
for(let i=0;i<15;i++){
let h=document.createElement("div");
h.innerHTML="üíñ";
h.style.position="fixed";
h.style.left=Math.random()*100+"%";
h.style.bottom="0";
document.body.appendChild(h);
setTimeout(()=>h.style.bottom="100%",50);
setTimeout(()=>h.remove(),1500);
}
}

/* enter send */
msg.addEventListener("keydown",e=>{
if(e.key==="Enter"){send();}
});

</script>
</body>
</html>
