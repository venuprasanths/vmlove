<!DOCTYPE html>
<html>
<head>
<title>Love Message Wall üíå</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
margin:0;
font-family:Segoe UI,Arial;
background:linear-gradient(135deg,#ff4f8b,#3b0030);
min-height:100vh;
color:white;
padding:15px;
}

h2{text-align:center;}

.card{
background:rgba(255,255,255,.2);
padding:15px;
border-radius:20px;
max-width:400px;
margin:auto;
}

input,textarea{
width:100%;
padding:8px;
border-radius:10px;
border:none;
margin-top:8px;
}

button{
margin-top:10px;
width:100%;
padding:10px;
border-radius:15px;
border:none;
background:#ffd1dc;
cursor:pointer;
}

.msg{
background:white;
color:black;
padding:8px;
border-radius:10px;
margin:6px 0;
font-size:13px;
}

.time{font-size:10px;color:gray;}

.del{
float:right;
color:red;
cursor:pointer;
}

#thanks{
position:fixed;inset:0;background:rgba(0,0,0,.6);
display:none;justify-content:center;align-items:center;z-index:10;
}
#thanks div{
background:white;color:black;padding:20px;border-radius:20px;text-align:center;
}

/* celebration */
.confetti{
position:fixed;
top:-10px;
font-size:22px;
animation:fall 2s linear forwards;
pointer-events:none;
z-index:20;
}
@keyframes fall{
to{transform:translateY(110vh) rotate(360deg);opacity:0;}
}

.burst{
position:fixed;
font-size:25px;
animation:burst 1.2s ease-out forwards;
pointer-events:none;
z-index:20;
}
@keyframes burst{
0%{transform:scale(0);}
60%{transform:scale(1.5);}
100%{transform:scale(0);opacity:0;}
}
</style>
</head>

<body>

<h2>üíå Love Wall</h2>

<div class="card">

<input id="uname" placeholder="Your name">
<textarea id="umsg" placeholder="Write message"></textarea>

<button onclick="sendMsg()">Send ‚ù§Ô∏è</button>

<input id="pin" placeholder="Admin PIN">

<div id="messages"></div>

</div>

<div id="thanks" onclick="this.style.display='none'">
<div>
<h3>Thank you for your message üíñ</h3>
</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getDatabase, ref, push, onChildAdded, remove } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

const firebaseConfig={
apiKey:"AIzaSyAetysNyLP1kFZIWM-IhDtHH_Kq7HoSGxg",
authDomain:"vmlove-a2df1.firebaseapp.com",
databaseURL:"https://vmlove-a2df1-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"vmlove-a2df1",
storageBucket:"vmlove-a2df1.firebasestorage.app",
messagingSenderId:"932908158778",
appId:"1:932908158778:web:eb8185babb63b8aff80a03"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);
const wallRef=ref(db,"wall");

window.sendMsg=function(){
let n=uname.value.trim();
let m=umsg.value.trim();
if(!n||!m)return alert("Fill both");

push(wallRef,{
name:n,
msg:m,
time:new Date().toLocaleString()
});

umsg.value="";
thanks.style.display="flex";
celebrate();
}

/* realtime load */
onChildAdded(wallRef,(s)=>{
let d=s.val();
let id=s.key;

messages.innerHTML=
`<div class="msg" id="${id}">
<b>${d.name}</b>
<span class="del" onclick="delMsg('${id}')">üóë</span><br>
${d.msg}<br>
<span class="time">${d.time}</span>
</div>`+messages.innerHTML;
});

/* delete admin */
window.delMsg=function(id){
if(pin.value=="1234"){
remove(ref(db,"wall/"+id));
document.getElementById(id).remove();
}else alert("Admin only");
}

/* enter send */
umsg.addEventListener("keydown",e=>{
if(e.key=="Enter"){e.preventDefault();sendMsg();}
});

/* celebration effect */
function celebrate(){

for(let i=0;i<40;i++){
 let c=document.createElement("div");
 c.className="confetti";
 c.innerHTML=Math.random()>0.5?"üíñ":"‚ú®";
 c.style.left=Math.random()*100+"%";
 document.body.appendChild(c);
 setTimeout(()=>c.remove(),2000);
}

for(let i=0;i<15;i++){
 let b=document.createElement("div");
 b.className="burst";
 b.innerHTML="üíù";
 b.style.left="50%";
 b.style.top="50%";
 document.body.appendChild(b);
 setTimeout(()=>b.remove(),1200);
}
}

</script>

</body>
</html>
