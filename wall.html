<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Love Wall</title>

<style>
body{
margin:0;
background:#ff4f8b;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
}

.box{
background:white;
padding:15px;
border-radius:15px;
width:90%;
max-width:380px;
}

input,textarea{
width:100%;
padding:8px;
margin-top:6px;
border-radius:10px;
border:1px solid #ccc;
}

button{
width:100%;
margin-top:8px;
padding:10px;
border:none;
background:pink;
border-radius:12px;
}

.msg{
background:#ffe6f0;
padding:6px;
margin-top:6px;
border-radius:10px;
font-size:13px;
}

.del{float:right;color:red;cursor:pointer}
</style>
</head>

<body>

<div class="box">
<h3>üíå Love Wall</h3>

<input id="name" placeholder="Your name">
<textarea id="msg" placeholder="Your message"></textarea>
<button onclick="send()">Send ‚ù§Ô∏è</button>

<input id="pin" placeholder="Admin PIN (1234)">

<div id="list"></div>
</div>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
apiKey:"AIzaSyAetysNyLP1kFZIWM-IhDtHH_Kq7HoSGxg",
databaseURL:"https://vmlove-a2df1-default-rtdb.asia-southeast1.firebasedatabase.app"
});

var db=firebase.database().ref("wall");

function send(){
let n=name.value;
let m=msg.value;

if(!n||!m){alert("Fill both");return;}

db.push({
name:n,
msg:m,
time:new Date().toLocaleString()
});

msg.value="";
alert("Thank you ‚ù§Ô∏è");
}

db.on("child_added",snap=>{
let d=snap.val();
let id=snap.key;

let del="";
if(pin.value=="1234"){
del=`<span class='del' onclick="delMsg('${id}')">Delete</span>`;
}

list.innerHTML=
`<div class='msg'>${del}<b>${d.name}</b><br>${d.msg}<br><small>${d.time}</small></div>`+list.innerHTML;
});

function delMsg(id){
firebase.database().ref("wall/"+id).remove();
location.reload();
}
</script>

</body>
</html>
